(this.webpackJsonpDGV2=this.webpackJsonpDGV2||[]).push([[20],{3153:function(e,t,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mustBeMetaMask,n=void 0!==t&&t,a=e.silent,r=void 0!==a&&a,o=e.timeout,c=void 0===o?3e3:o;s();var i=!1;return new Promise((function(e){function t(){if(!i){i=!0,window.removeEventListener("ethereum#initialized",t);var a=window.ethereum;if(!a||n&&!a.isMetaMask){var o=n&&a?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!r&&console.error("@metamask/detect-provider:",o),e(null)}else e(a)}}window.ethereum?t():(window.addEventListener("ethereum#initialized",t,{once:!0}),setTimeout((function(){t()}),c))}));function s(){if("boolean"!==typeof n)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!==typeof r)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!==typeof c)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}},3384:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n.n(a),o=n(26),c=n(32),i=n(4),s=n(3153),u=n.n(s),l=n(741),d=n(975),f=n(956),b=n(848),p=n(31),v=n(208),j=n(110),h=n.n(j),m=n(1130),O=n(982),w=n(979),x=n(957),k=n(10),g=["title","children","bsPrefix","rootCloseEvent","variant","size","menuRole","renderMenuOnMount","disabled","href","id","menuVariant"],E={id:h.a.string,href:h.a.string,onClick:h.a.func,title:h.a.node.isRequired,disabled:h.a.bool,align:x.a,menuRole:h.a.string,renderMenuOnMount:h.a.bool,rootCloseEvent:h.a.string,menuVariant:h.a.oneOf(["dark"]),bsPrefix:h.a.string,variant:h.a.string,size:h.a.string},y=i.forwardRef((function(e,t){var n=e.title,a=e.children,r=e.bsPrefix,o=e.rootCloseEvent,c=e.variant,i=e.size,s=e.menuRole,u=e.renderMenuOnMount,l=e.disabled,d=e.href,f=e.id,b=e.menuVariant,j=Object(v.a)(e,g);return Object(k.jsxs)(m.a,Object(p.a)(Object(p.a)({ref:t},j),{},{children:[Object(k.jsx)(O.a,{id:f,href:d,size:i,variant:c,disabled:l,childBsPrefix:r,children:n}),Object(k.jsx)(w.a,{role:s,renderOnMount:u,rootCloseEvent:o,variant:b,children:a})]}))}));y.displayName="DropdownButton",y.propTypes=E;var M,I=y,C=n(868),B=n(24),N=n(1132),S=n(158),D=n.n(S),z=function(e){var t=e.tokenInfo,n=e.goWallet,a=e.isError,r=e.networkId;return Object(k.jsx)(k.Fragment,{children:a?Object(k.jsx)(C.a,{variant:"danger",className:"pl-2 ms-4",onClick:n,children:"Wrong network : ".concat(r)}):Object(k.jsx)(C.a,{variant:"outline-dark",className:"pl-2 ms-4",onClick:n,children:"".concat(t.balance," YakID")})})},P=function(e){var t=e.web3,n=e.account,a=e.yakiAddress,s=Object(i.useState)(!1),u=Object(c.a)(s,2),l=u[0],d=u[1],f=Object(i.useState)(void 0),b=Object(c.a)(f,2),p=b[0],v=b[1],j=Object(i.useState)(""),h=Object(c.a)(j,2),m=h[0],O=h[1],w=Object(i.useState)(!1),x=Object(c.a)(w,2),g=x[0],E=x[1],y=Object(B.f)();console.log(a);var I,S=function(){M?(console.log("update info"),P()):console.log("yaki not loaded update")};Object(i.useEffect)((function(){return function(){var e=Object(o.a)(r.a.mark((function e(){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.eth.net.getNetworkType();case 3:return o=e.sent,e.next=6,Object(N.a)(t,a,n);case 6:return M=e.sent,O(o),e.next=10,P();case 10:d(!0),E(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),d(!1),E(!0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}()().then((function(){I=setInterval(S,1e3)})),function(){clearInterval(I)}}),[]);var P=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.decimals();case 2:return t=e.sent,e.next=5,M.pointBanlanceOf(n);case 5:a=e.sent,o=D.a.utils.toBN(a).div(D.a.utils.toBN(Math.pow(10,t))).toString(),console.log(o),v({balance:o});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();l&&console.log(p.balance);var F=function(){y.push("/wallet")};return Object(k.jsx)(k.Fragment,{children:l&&t||t&&g?Object(k.jsx)(z,{tokenInfo:p,goWallet:F,isError:g,networkId:m}):Object(k.jsx)(C.a,{variant:"outline-dark",className:"pl-2 ms-4",children:"Loading"})})},F=!1;t.default=function(e){var t=e.web3,n=e.account1,a=e.setProviderData,s=Object(l.g)(),p=(s.account,s.connect),v=s.reset,j=(s.status,Object(i.useState)(!1)),h=Object(c.a)(j,2),O=h[0],w=h[1],x="dgov-login-state";Object(i.useEffect)((function(){F||(F=!0);var e=localStorage.getItem(x);"0"!=e||O?"1"==e&&O&&g():E()}));var g=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(),a(),localStorage.setItem(x,"1"),w(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p().then((function(){u()().then((function(e){e&&a(e)}))})),localStorage.setItem(x,"0"),w(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(d.a,{children:Object(k.jsxs)(f.a,{children:[Object(k.jsx)(b.a,{md:4,children:Object(k.jsx)(I,{id:"dropdown-item-button",title:n.slice(0,4)+"..."+n.slice(-4),variant:"secondary",className:"me-5",children:Object(k.jsx)(m.a.Item,{as:"button",onClick:function(){return g()},children:"Disconnect  "})})}),Object(k.jsx)(b.a,{md:7,children:Object(k.jsx)(P,{web3:t,account:n,yakiAddress:"0xf42FF460BAEfBd932606cD56328d9dcf33240230"})})]})})}):Object(k.jsx)(C.a,{variant:"secondary",onClick:E,children:"Connect"})}},957:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(110),r=n.n(a),o=r.a.oneOf(["start","end"]),c=r.a.oneOfType([o,r.a.shape({sm:o}),r.a.shape({md:o}),r.a.shape({lg:o}),r.a.shape({xl:o}),r.a.shape({xxl:o})])}}]);
//# sourceMappingURL=20.d4d20022.chunk.js.map